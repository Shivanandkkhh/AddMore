{% assign active_blocks = shop.metafields.marketplace.active_blocks.value %}
{% if active_blocks contains 'reels-01' %}
<div
  class="market-reels"
  style="display: flex; justify-content: center; padding: 40px 20px; margin: 0 auto; max-width: 100%;"
>
  <div style="width: 100%; max-width: 350px; aspect-ratio: 9 / 16; position: relative; border-radius: 12px; overflow: hidden; background: #000;">
    <video
      src="{{ block.settings.video_url }}"
      style="width: 100%; height: 100%; object-fit: cover;"
      autoplay
      loop
      {% if block.settings.mute_video %}
        muted
      {% endif %}
      playsinline
    ></video>
    <div style="position: absolute; bottom: 20px; left: 20px; color: white;">
      <h3 style="margin: 0; text-shadow: 1px 1px 2px rgba(0,0,0,0.8);">{{ block.settings.title }}</h3>
    </div>
  </div>
</div>

{% else %}
{% if request.design_mode %}<div style="padding: 20px; background: #fff3cd; color: #856404; border: 1px solid #ffeeba; text-align: center; border-radius: 4px; margin: 10px 0;"><strong>⚠️ AddMore App: Block Not Activated</strong><br>Please activate this block in your AddMore App dashboard to use it.</div>{% else %}<style>div[data-shopify-editor-block] { display: none; margin: 0; padding: 0; }</style>{% endif %}
{% endif %}
{% schema %}
{
  "name": "Marketplace UGC Reel",
  "target": "section",
  "settings": [
    { "type": "text", "id": "title", "label": "Video Overlay Title", "default": "Trending Now!" },
    {
      "type": "url",
      "id": "video_url",
      "label": "MP4 Video URL",
      "info": "Paste a direct MP4 link (e.g. from Shopify Files)"
    },
    { "type": "checkbox", "id": "mute_video", "label": "Mute Video by Default", "default": true }
  ]
}
{% endschema %}
